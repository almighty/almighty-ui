<f8-select-dropdown
  #dropdown
  [toggleButtonRef]="toggleButtonRef"
  [dropdownItem]="dropdownItem"
  [headerText]="headerText"
  [menuItems]="menuItems | async"
  [showSearch]="true"
  [disabled]="!allowUpdate"
  [loading]="searching"
  (onSelect)="onSelect($event)"
  (onSearch)="onSearch($event)"
  (onOpen)="onOpen($event)"
  (onClose)="onClose($event)">
  <ng-template #toggleButtonRef>
    <span
      [class.toggle]="allowUpdate"
      *ngFor="let item of selectedItems; let i = index;">
      <span
        [class.active]="isOpen"
        [class.disable]="!allowUpdate">
        {{ item.displayValue | truncate: 20 }}
      </span>
      <span *ngIf="i === selectedItems.length-2">, </span>
    </span>
    <span
      [class.toggle]="allowUpdate"
      [class.active]="isOpen"
      [class.disable]="!allowUpdate"
      *ngIf="!selectedItems.length">
      {{ noValueLabel }}
    </span>
  </ng-template>
  <ng-template #dropdownItem let-value="value">
    <span [innerHTML]="value | almSearchHighlight: searchValue">
    </span>
  </ng-template>
</f8-select-dropdown>
