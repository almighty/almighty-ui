<div class="work-item-list-page">
  <div #listContainer
       almInfiniteScroll
       class="detail-list-wrap list-group list-view-pf"
       [eachElementHeightInPx]='contentItemHeight'
       (initItems)='initWiItems($event)'
       (fetchMore)='fetchMoreWiItems()'>
    <alm-tree-list #treeList
        [listTemplate]="treeListTemplate"
        [loadTemplate]="treeListLoadTemplate"
        [nodes]="workItems"
        [options]="treeListOptions"
        [showExpander]="false">
      <template #treeListLoadTemplate let-node="node" let-index="index">
        <span>Loading...</span>
      </template>
      <template #treeListTemplate let-node="node" let-index="index">
        <alm-tree-list-item #treeListItem
            [node]="node"
            (onSelect)="onSelect($event)"
            [template]="treeListItemTemplate">
          <template #treeListItemTemplate>
            <alm-work-item-list-entry
                id="{{'workItemList_OuterWrap_' + index}}"
                class="work-item-list-entry"
                [listItem]="treeListItem"
                [workItem]="node.data"
                (selectEvent)="onSelect($event)"
                (toggleEvent)="onToggle($event)"
                (detailEvent)="onDetail($event)"
                (moveTopEvent)="onMoveToTop($event)"
                (moveBottomEvent)="onMoveToBottom($event)">
            </alm-work-item-list-entry>
          </template>
        </alm-tree-list-item>
      </template>
    </alm-tree-list>
    <div *ngIf="!workItems || workItems.length === 0">
      <h2 class="error no-wi">No workitems were found!</h2>
    </div>
  </div>

  <div id="workItemList_Error" class="error" *ngIf="error">{{error}}</div>

  <div id="workItemList_quickAdd" class="work-item-list-quick-add" *ngIf="loggedIn">
      <alm-work-item-quick-add [wilistview]="'wi-list-view'" (close)="close($event)"></alm-work-item-quick-add>
  </div>
</div>

<router-outlet></router-outlet>
